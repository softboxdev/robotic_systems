# Создание line_map.pgm в Paint - пошаговая инструкция

## 1. Создание изображения в Paint

### Шаг 1: Открытие Paint
- Нажмите `Win + R`, введите `mspaint` и нажмите Enter
- Или найдите "Paint" в меню Пуск

### Шаг 2: Настройка размера холста
- Нажмите **"Изменить размер"** на вкладке **Главная**
- Выберите **"Пиксели"**
- Установите размер, например: **Ширина: 100**, **Высота: 100**
- Снимите галочку **"Сохранять пропорции"**
- Нажмите **OK**

### Шаг 3: Заливка фона белым цветом
- Выберите белый цвет в палитре
- Нажмите **"Заливка"** (ведро с краской)
- Кликните на холст для заливки белым цветом

### Шаг 4: Рисование черных линий
- Выберите черный цвет в палитре
- Выберите инструмент **"Кисть"** или **"Линия"**
- Установите толщину линии: **1 пиксель**
- Нарисуйте линии для маршрута

## 2. Примеры простых трасс

### Простая круговая трасса:
```
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓░░░░░░░░░░░░░░░░░░░░░░░▓
▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░▓
▓░▓░░░░░░░░░░░░░░░░░░░▓▓
▓░▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░▓▓▓
▓░▓░▓░░░░░░░░░░░░░░░▓▓▓▓
▓░▓░▓░▓▓▓▓▓▓▓▓▓▓▓▓░▓▓▓▓▓
▓░▓░▓░▓░░░░░░░░░░░▓▓▓▓▓▓
▓░▓░▓░▓░▓▓▓▓▓▓▓▓░▓▓▓▓▓▓▓
▓░▓░▓░▓░▓░░░░░░░▓▓▓▓▓▓▓▓
▓░▓░▓░▓░▓░▓▓▓▓░▓▓▓▓▓▓▓▓▓
▓░▓░▓░▓░▓░▓░░░▓▓▓▓▓▓▓▓▓▓
▓░▓░▓░▓░▓░▓▓░▓▓▓▓▓▓▓▓▓▓▓
▓░▓░▓░▓░▓░░░▓▓▓▓▓▓▓▓▓▓▓▓
▓░▓░▓░▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓░▓░▓░▓░░░░░░░░░░░░░░░▓▓
▓░▓░▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░▓▓
▓░▓░▓░░░░░░░░░░░░░░░░░▓▓
▓░▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓░▓░░░░░░░░░░░░░░░░░░░▓▓
▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░▓▓
▓░░░░░░░░░░░░░░░░░░░░░▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
```

### Прямой маршрут с поворотами:
```
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓░░░░░░░░░░░░░░░░░░░░░░░▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░▓
▓░░░░░░░░░░░░░░░░░░░░▓░▓
▓░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░▓░▓
▓░▓░░░░░░░░░░░░░░░░▓░▓░▓
▓░▓░▓▓▓▓▓▓▓▓▓▓▓▓▓░░▓░▓░▓
▓░▓░▓░░░░░░░░░░░░▓░▓░▓░▓
▓░▓░▓░▓▓▓▓▓▓▓▓▓░░▓░▓░▓░▓
▓░▓░▓░▓░░░░░░░░▓░▓░▓░▓░▓
▓░▓░▓░▓░▓▓▓▓▓░░▓░▓░▓░▓░▓
▓░▓░▓░▓░▓░░░░▓░▓░▓░▓░▓░▓
▓░▓░▓░▓░▓░▓░░▓░▓░▓░▓░▓░▓
▓░▓░▓░▓░▓░░▓░▓░▓░▓░▓░▓░▓
▓░▓░▓░▓░▓▓░▓░▓░▓░▓░▓░▓░▓
▓░▓░▓░▓░░░▓░▓░▓░▓░▓░▓░▓
▓░▓░▓░▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░▓░▓░░░░▓░▓░▓░▓░▓░▓░▓
▓░▓░▓▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░▓░░░░░▓░▓░▓░▓░▓░▓░▓
▓░▓▓▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░░░░░░▓░▓░▓░▓░▓░▓░▓
▓▓▓▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░░░░░▓░▓░▓░▓░▓░▓░▓
▓▓▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░░░░▓░▓░▓░▓░▓░▓░▓
▓▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░░░▓░▓░▓░▓░▓░▓░▓
▓▓▓░▓░▓░▓░▓░▓░▓░▓
▓░░▓░▓░▓░▓░▓░▓░▓
▓▓░▓░▓░▓░▓░▓░▓░▓
▓░▓░▓░▓░▓░▓░▓░▓░▓
▓░░░░░░░░░░░░░░░░░░░▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
```

## 3. Сохранение в PGM формате

### Шаг 1: Сохранение как BMP
- **Файл** → **Сохранить как** → **Рисунок в формате BMP**
- Сохраните как `line_map.bmp`

### Шаг 2: Конвертация в PGM
Установите ImageMagick или используйте онлайн-конвертер:

```bash
# Если установлен ImageMagick
convert line_map.bmp -colorspace Gray line_map.pgm
```

Или используйте Python скрипт для конвертации:

### convert_bmp_to_pgm.py
```python
from PIL import Image
import os

def convert_bmp_to_pgm(bmp_path, pgm_path):
    # Открываем BMP изображение
    with Image.open(bmp_path) as img:
        # Конвертируем в черно-белое
        bw_img = img.convert('L')
        # Сохраняем как PGM
        bw_img.save(pgm_path, 'PPM')
    
    print(f"Конвертировано: {bmp_path} -> {pgm_path}")

# Использование
convert_bmp_to_pgm('line_map.bmp', 'line_map.pgm')
```

## 4. Создание YAML файла

Создайте файл `line_map.yaml` с содержимым:

```yaml
image: line_map.pgm
resolution: 0.05
origin: [0.0, 0.0, 0.0]
occupied_thresh: 0.65
free_thresh: 0.196
negate: 0
```

## 5. Альтернативные способы создания PGM

### Способ 1: Использование GIMP (бесплатный)
1. Установите GIMP
2. Создайте изображение 100x100 пикселей
3. Нарисуйте черные линии на белом фоне
4. **Файл** → **Экспортировать как**
5. Выберите **PGM формат**
6. Сохраните как `line_map.pgm`

### Способ 2: Программное создание на Python

### create_test_map.py
```python
from PIL import Image, ImageDraw

def create_line_map(width=100, height=100):
    # Создаем белое изображение
    img = Image.new('L', (width, height), 255)
    draw = ImageDraw.Draw(img)
    
    # Рисуем границы
    draw.rectangle([0, 0, width-1, height-1], outline=0)
    
    # Рисуем простой лабиринт
    # Вертикальные линии
    for x in range(10, width, 20):
        draw.line([(x, 10), (x, height-10)], fill=0, width=1)
    
    # Горизонтальные линии
    for y in range(10, height, 20):
        draw.line([(10, y), (width-10, y)], fill=0, width=1)
    
    # Сохраняем как PGM
    img.save('line_map.pgm')
    print("Карта создана: line_map.pgm")

create_line_map()
```

## 6. Проверка созданной карты

```python
from PIL import Image

def check_map(file_path):
    img = Image.open(file_path)
    print(f"Размер: {img.size}")
    print(f"Формат: {img.format}")
    print(f"Режим: {img.mode}")
    
    # Проверяем цвета
    pixels = list(img.getdata())
    unique_colors = set(pixels)
    print(f"Уникальные значения: {unique_colors}")

check_map('line_map.pgm')
```

## 7. Советы по созданию хорошей карты

1. **Простота**: Начните с простых прямых линий
2. **Толщина**: Используйте линии толщиной 1-2 пикселя
3. **Контраст**: Только черный (0) и белый (255)
4. **Размер**: 100x100 пикселей для начала
5. **Замкнутость**: Убедитесь, что линии образуют связный граф
6. **Ширина проходов**: Оставляйте достаточно места для "проезда" робота

## 8. Пример минимальной карты

Создайте простейшую карту с одной линией:

```
▓▓▓▓▓▓▓▓▓▓
▓░░░░░░░░▓
▓░▓▓▓▓▓▓░▓
▓░▓░░░░▓░▓
▓░▓░▓▓░▓░▓
▓░▓░▓░▓░▓▓
▓░▓░▓░░░▓▓
▓░▓░▓▓▓▓▓▓
▓░▓░░░░░░▓
▓░▓▓▓▓▓▓░▓
▓░░░░░░░░▓
▓▓▓▓▓▓▓▓▓▓
```

После создания карты поместите оба файла (`line_map.pgm` и `line_map.yaml`) в папку `maps/` вашего ROS пакета.